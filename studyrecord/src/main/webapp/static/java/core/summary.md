**volatile**的实现最终是加了内存屏障，

1. 保证写volatile变量会强制把CPU写缓存区的数据刷新到内存

2. 读volatile变量时，使缓存失效，强制从内存中读取最新的值

3. 由于内存屏障的存在，volatile变量还能阻止重排序

所以volatile变量的修改可以立刻让所有的线程可见，保证了可见性。

